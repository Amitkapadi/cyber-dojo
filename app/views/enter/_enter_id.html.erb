
<script type="text/javascript"><!--

$(function() {

  var kataIdInput = $('#kata-id-input');

  var startButton    = $('#start-button');
  var continueButton = $('#continue-button');
  var reviewButton   = $('#review-button');

  var enable = function(button) {
    button.removeAttr('disabled');
  };
  var disable = function(button) {
    button.prop('disabled', true);
  };

  var setEnabled = function(button, condition) {
    if (condition) {
      enable(button);
    } else {
      disable(button);
    }
  };

  cd.enableDisableStartContinueReview = function() {
    var id = kataIdInput.val();
    disable(startButton);
    disable(continueButton);
    disable(reviewButton);
    if (id.length >= 6) {
      $.getJSON('/enter/check', { id: id }, function(dojo) {
        setEnabled(startButton,    dojo.exists);
        setEnabled(continueButton, dojo.exists);
        setEnabled(reviewButton,   dojo.exists);
      });
    }
  };

  kataIdInput.keyup(function() {
    cd.enableDisableStartContinueReview();
  });

  cd.enableDisableStartContinueReview();
});

//--></script>

<input title="an id contains only the digits 0123456789 and letters ABCDEF, and is case insensitive"
       type="text"
       id="kata-id-input"
       size="8"
       value="<%= @id[0..5] %>">
</input>
