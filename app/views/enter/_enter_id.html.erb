
<script type="text/javascript"><!--

$(function() {

  var kataIdInput = $('#kata-id-input');
  var buttons = $('#start-button, #continue-button, #dashboard-button, #review-button');
  var enable = function(button) { $(button).removeAttr('disabled'); };
  var disable = function(button) { $(button).prop('disabled', true); };

  var enableDisableStartContinueDashboardReview = function() {
    var id = kataIdInput.val();
    buttons.each(function() { disable(this); });
    if (id.length >= 6) {
      $.getJSON('/enter/check', { id: id }, function(dojo) {
        buttons.each(function() {
          if (dojo.exists) {
            enable(this);
          } else {
            disable(this);
          }
        });
      });
    }
  };

  kataIdInput.keyup(function() {
    enableDisableStartContinueDashboardReview();
  });

  enableDisableStartContinueDashboardReview();

});

//--></script>

<input title="an id contains only the digits 0123456789 and letters ABCDEF, and is case insensitive"
       type="text"
       id="kata-id-input"
       size="8"
       value="<%= @id[0..5] %>">
</input>
