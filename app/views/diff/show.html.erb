
<script language="javascript" type="text/javascript"><!--

$j(document).ready(function() {
  $cd.buildDiffFilenames(<%= @diffs.to_json -%>);
  $j('#' + '<%=@current_filename_id-%>').click();
  
  $j('#start_new_kata_from_here').click(function() {
      $cd.postTo('/dojo/diff_save', {
        id: "<%= @kata.id -%>",
        language: "<%= @kata.language -%>",
        exercise: "<%= @kata.exercise -%>",
        avatar: "<%= @avatar.name -%>",
        tag: "<%= @traffic_lights_to_tag.length -%>"
      });
    });  
});

//--></script>

<table>
  <tr valign="top">
    <td>
      <div class="panel">
        <%= render :partial => 'info' -%>
      </div> 
      <div class="panel">
        <%= render :partial => 'prev_next' -%>
      </div>      
      <div class="panel">
        <%= render :partial => 'filenames' -%>
      </div>
      <div class="info panel">
        <br/>
        <%= render :partial => 'shared/info' -%>
        <br/>
        <input type="button"
               class="small button"
               id="start_new_kata_from_here"
               value="start-new-kata-from-here" />
      </div>
    </td>    
    <td>
      <%= render :partial => 'view' -%>
    </td>
  </tr>
</table>

