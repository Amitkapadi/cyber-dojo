
<script language="JavaScript"
        type="text/javascript"><!--

$cd.refreshDashboard = function() {
  $j.ajax({
    url: "<%= url_for :action => 'heartbeat', :id => @kata.id %>",
    data: { seconds_per_column: $cd.parseSecondsPerColumn(),
               maximum_columns: $cd.parseMaximumColumns() },
    dataType: "script"
  });
};

$j(document).ready(function() {
  var CARRIAGE_RETURN = 13;
  var seconds = 1000;
  setInterval($cd.refreshDashboard, 10*seconds);
  
  $j('#seconds_per_column,#maximum_columns').keyup(function(event) {
    if (event.which === CARRIAGE_RETURN) {
      $cd.refreshDashboard();
    }
  });  
});

//--></script>

<table align="center">
  <tr>
    <td align="center">
      <%= render :partial => 'shared/yin_yang' -%>      
      <div id="age">
        <%= render :partial => 'age' -%>
      </div>      
      <%= render :partial => 'shared/id' -%>
    </td>
    
    <td>
      &nbsp;&nbsp;
    </td>
    
    <td valign="bottom">
      <%= render :partial => 'shared/feedback' -%>
      <%= render :partial => 'tips' -%>
      <%= form_tag({ :action => 'show', :id => @kata.id }, :method => 'get') do %>
          <%= render :partial => 'seconds_per_column' -%>      
          <%= render :partial => 'maximum_columns' -%>
      <% end %>
    </td>
  </tr>  
</table>
  
<div id="traffic_lights" 
     class="panel">
  <%= render :partial => 'traffic_lights' -%>
</div>


