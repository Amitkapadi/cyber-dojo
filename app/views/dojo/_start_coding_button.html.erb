
<script language="javascript" type="text/javascript"><!--

$j(document).ready(function() {
  
  $cd.full = function(id) {
    var grid = $j('<div>');
    grid.load('/dojo/full_avatar_grid', { id: id }, function() {
      var resumer = $j('<div>')
        .html(grid.html())
        .dialog({
          autoOpen: false,
          title: $cd.h1('!start-coding'),
          width: 600,
          modal: true,
          buttons: {
            ok: function() {
              $j(this).dialog('close');
            }
          }
        });
      resumer.dialog('open');
    });
  };
    
  $j('#start_coding').click(function() {
    $cd.run('start_json', function(id, dojo) {
      if (dojo.exists === false) {
        $cd.cantFind('start-coding', id);
      } else if (dojo.full === true) {
        $cd.full(id);
      } else {
        $cd.postTo('/kata/edit', { id: id, avatar: dojo.avatar_name  }, '_blank');
      }
    });
  });

});

//--></script>

<input type="button"
       class="large button"
       id="start_coding"
       value="start-coding" />
