
<script type="text/javascript"><!--

$(document).ready(function() {
  
  $('.revert-traffic-light').click(function() {
    var title = "<%= t('views.labels.revert') %>";          
    var tag = $(this).data('tag');
	cd.dialog_revert(title, "<%=@kata.id%>", "<%=@avatar.name%>", tag);
  });

});

//--></script>

<div id="traffic_lights">
  <table>
    <tr class="row">
      
	  <td>	  
	    <%= render :partial => 'line_numbers_on_off' %>
	  </td>

      <% max_lights = 36 %>                
      <% recent(@traffic_lights, max_lights).each do |light| %>
        <td>
		  <span class="revert-traffic-light"
				data-tag="<%= light[:number] %>">
            <%= revert_traffic_light(light) %>
		  </span>
        </td>
      <% end %>

      <td>
		<%= render :partial => 'revert_tip' %>
      </td>                  
      
      <td>
		<%= render :partial => 'shared/traffic_light_bulb_counts',
				   :locals  => { :traffic_lights => @traffic_lights,
							 	 :avatar_name    => translate_avatar(@avatar.name)
							   } %>
      </td>
	  
      <td>
		<%= render :partial => 'shared/traffic_light_count',
				   :locals  => { :traffic_lights => @traffic_lights,
								 :avatar_name    => translate_avatar(@avatar.name)
							   } %>
      </td>

	  <td>
        <%= render :partial => 'test_button' %>		
	  </td>
    </tr>      
  </table>
</div>

