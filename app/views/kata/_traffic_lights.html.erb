
<script type="text/javascript"><!--

$(function() {

  cd.pieChart($('#traffic-lights .pie'));
  cd.setupTrafficLightOpensDiffDialogHandlers($('.diff-traffic-light'));
  var allTheWay = 100000;
  $('#traffic-lights').scrollLeft(allTheWay);

});

//--></script>

<table>
  <tr class="row">

	<% @avatar.lights.each do |light| %>
	  <td>
		<%= raw diff_traffic_light(@kata, @avatar.name, light, @avatar.lights.length) %>
	  </td>
	<% end %>

	<td>
	  <%= render :partial => 'shared/traffic_light_count',
				 :locals  => { :lights => @avatar.lights,
							   :avatar_name => translate_avatar(@avatar.name)
							 } %>
	</td>

    <% if @avatar.active? %>
	<td>
	  <%= raw pie_chart(@avatar.lights, 40, @avatar.name) %>
	</td>
    <% end %>

	<td>
	  <%= render :partial => 'avatar_image' %>
	</td>

  </tr>
</table>
