

Downloaded Linux Server iso image
http://www.ubuntu.com/download/server

Created new Guest in VirtualBox, called Linux Server, type=Linux, accepted settings
Clicked it to start and it asked for the image
Pointed it to the iso image I downloaded.
Responded to all the questions to setup the server.
Created a user called jon with usual password (sudoer)

Changed the network settings to Host-only-adapter.

Logged in as jon
$ ifconfig 
192.168.59.104  
$ sudo apt-get install git

make a git user
$ sudo adduser git
made sure its home folder was /home/git
prepare for ssh access files from host OS
$ mkdir /home/git/.ssh
$ chmod 700 .ssh

Now create /opt/git ready for repos
$ cd /opt
$ sudo mkdir git
$ sudo chown git git
$ sudo chgrp git git


Now back on host OSX, add my ssh credentials into the guest os git user
$ scp id_rsa.pub git@192.168.59.104:/home/git/.ssh

Now in guest OS add that to authorized_keys
$ su git
$ cd /home/git/.ssh
$ cat id_rsa.pub > authorized_keys
$ chmod 600 authorized_keys


Now back on host push bare repo to git server
$ mkdir jj
$ cd jj
$ git init
$ cd ..
$ git clone --bare jj jj.git
$ scp -r jj.git git@192.168.59.104:/opt/git


Back in guest OS check its there
$ cd /opt/git
$ ls
jj.git


Back in host OS check I can clone from it
$ git clone git@192.168.59.104:/opt/git/jj.git


Seems to work.

